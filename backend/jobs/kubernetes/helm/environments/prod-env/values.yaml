ingress:
  host: minikube.me
  paths:
    - path: /api/v1/composite
      service: composite
    - path: /actuator/health
      service: composite
    - path: /openapi
      service: composite
    - path: /webjars
      service: composite

secrets:

  rabbitmq-credentials:
    SPRING_RABBITMQ_USERNAME: rabbit
    SPRING_RABBITMQ_PASSWORD: rabbit

  rabbitmq-zipkin-credentials:
    RABBIT_USER: rabbit
    RABBIT_PASSWORD: rabbit

  postgres-credentials:
    SPRING_DATASOURCE_USERNAME: postgres
    SPRING_DATASOURCE_PASSWORD: postgres

company:
  image:
    tag: v1
  env:
    SPRING_PROFILES_ACTIVE: "docker,prod"
  envFromSecretRefs:
    - rabbitmq-credentials
    - postgres-credentials
  resources:
    requests:
      memory: 200Mi
    limits:
      memory: 400Mi

resume:
  image:
    tag: v1
  env:
    SPRING_PROFILES_ACTIVE: "docker,prod"
  envFromSecretRefs:
    - rabbitmq-credentials
    - postgres-credentials
  resources:
    requests:
      memory: 200Mi
    limits:
      memory: 400Mi

job:
  image:
    tag: v1
  env:
    SPRING_PROFILES_ACTIVE: "docker,prod"
  envFromSecretRefs:
    - rabbitmq-credentials
    - postgres-credentials
  resources:
    requests:
      memory: 200Mi
    limits:
      memory: 400Mi

composite:
  image:
    tag: v1
  env:
    SPRING_PROFILES_ACTIVE: "docker,prod"
  envFromSecretRefs:
    - rabbitmq-credentials
  resources:
    requests:
      memory: 200Mi
    limits:
      memory: 400Mi

zipkin-server:
  env:
    LOGGING_LEVEL_ROOT: WARN
    RABBIT_ADDRESSES: 172.17.0.1
  envFromSecretRefs:
    - rabbitmq-zipkin-credentials
  resources:
    requests:
      memory: 300Mi
    limits:
      memory: 600Mi